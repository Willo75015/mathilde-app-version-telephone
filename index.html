<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- âš ï¸ Headers de sÃ©curitÃ© maintenant gÃ©rÃ©s via Vite server headers âš ï¸ -->
  <!-- PWA Meta -->
  <meta name="theme-color" content="#10b981">
  <meta name="background_color" content="#ffffff">
  <meta name="display" content="standalone">
  <meta name="orientation" content="portrait">
  
  <!-- IcÃ´nes -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <!-- <link rel="manifest" href="/manifest.json"> Temporairement dÃ©sactivÃ© pour debug -->
  
  <!-- Fonts avec preload pour performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
  
  <title>Mathilde Fleurs - Gestion d'Ã‰vÃ©nements</title>
  
  <!-- Preload optimisÃ© - dÃ©sactivÃ© pour Ã©viter les erreurs 404 en production -->
  <!-- Le preload des assets est gÃ©rÃ© automatiquement par Vite -->
</head>
<body>
  <div id="root"></div>
  
  <!-- Service Worker Registration - TOTALEMENT DÃ‰SACTIVÃ‰ EN DEV -->
  <script>
    // DÃ‰SACTIVER TOTALEMENT LE SW EN DÃ‰VELOPPEMENT
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
      console.log('ðŸ”§ Mode dÃ©veloppement - SW complÃ¨tement dÃ©sactivÃ©')
      
      // DÃ©sinstaller tous les SW existants
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          registrations.forEach(function(registration) {
            registration.unregister()
          })
        })
        
        // Vider les caches
        caches.keys().then(function(cacheNames) {
          return Promise.all(cacheNames.map(function(cacheName) {
            return caches.delete(cacheName)
          }))
        })
      }
    } else {
      // SW uniquement en production
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(registration => {
              console.log('âœ… SW registered for production:', registration.scope)
            })
        })
      }
    }
  </script>
  
  <script type="module" src="/src/main.tsx"></script>
</body>
</html>